{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mehme\\\\OneDrive\\\\Masa\\xFCst\\xFC\\\\SWESYS\\\\frontend\\\\src\\\\components\\\\ProgramList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { FACULTIES, getDepartmentsByFaculty } from '../constants/facultiesAndDepartments';\nimport { getCourses, getSchedules } from '../api';\nimport '../styles/ProgramList.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LEVELS = [{\n  id: 'prep',\n  name: 'Preparatory Year',\n  icon: '🔍'\n}, {\n  id: 'year1',\n  name: 'Year 1',\n  icon: '1️⃣'\n}, {\n  id: 'year2',\n  name: 'Year 2',\n  icon: '2️⃣'\n}, {\n  id: 'year3',\n  name: 'Year 3',\n  icon: '3️⃣'\n}, {\n  id: 'year4',\n  name: 'Year 4',\n  icon: '4️⃣'\n}, {\n  id: 'graduate',\n  name: 'Graduate',\n  icon: '🎓'\n}, {\n  id: 'phd',\n  name: 'PhD',\n  icon: '🔬'\n}];\n\n// Map string level values to IDs\nconst getLevelId = levelString => {\n  if (levelString.includes('Preparatory')) return 'prep';\n  if (levelString.includes('Year 1')) return 'year1';\n  if (levelString.includes('Year 2')) return 'year2';\n  if (levelString.includes('Year 3')) return 'year3';\n  if (levelString.includes('Year 4')) return 'year4';\n  if (levelString.includes('Graduate')) return 'graduate';\n  if (levelString.includes('PhD')) return 'phd';\n  return 'year1'; // Default to year 1\n};\nconst ProgramList = ({\n  token\n}) => {\n  _s();\n  const {\n    facultyId,\n    departmentId\n  } = useParams();\n  const [courses, setCourses] = useState([]);\n  const [schedules, setSchedules] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [viewMode, setViewMode] = useState('list'); // 'list' veya 'schedule'\n\n  const faculty = FACULTIES.find(f => f.id === facultyId);\n  const departments = getDepartmentsByFaculty(facultyId);\n  const department = departments.find(d => d.id === departmentId);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n\n        // Kurs ve program verilerini paralel olarak al\n        const [coursesData, schedulesData] = await Promise.all([getCourses(token), getSchedules(token)]);\n\n        // Fakülte ve bölüme göre filtreleme\n        const facultyName = faculty ? faculty.name : '';\n        const departmentName = department ? department.name : '';\n        const filteredCourses = coursesData.filter(course => course.faculty === facultyName && course.department === departmentName);\n\n        // İlgili derslerin ID'lerini al\n        const courseIds = filteredCourses.map(course => course.id);\n\n        // Bu bölüme ait olan programları filtrele\n        const filteredSchedules = schedulesData.filter(schedule => schedule.course && courseIds.includes(schedule.course.id));\n        setCourses(filteredCourses);\n        setSchedules(filteredSchedules);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n        setError('Failed to load data. Please try again.');\n        setLoading(false);\n      }\n    };\n    if (faculty && department) {\n      fetchData();\n    } else {\n      setLoading(false);\n      setError('Invalid faculty or department');\n    }\n  }, [token, faculty, department]);\n  if (!faculty || !department) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"program-list-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: \"Faculty or department not found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/faculties\",\n        className: \"back-link\",\n        children: \"Back to Faculties\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Group courses by level\n  const coursesByLevel = {};\n  LEVELS.forEach(level => {\n    coursesByLevel[level.id] = courses.filter(course => getLevelId(course.level) === level.id);\n  });\n\n  // Ders programı tablosu için haftalık saat aralıklarını tanımla\n  const timeSlots = ['08:30-10:00', '10:15-11:45', '12:00-13:30', '13:45-15:15', '15:30-17:00', '17:15-18:45'];\n\n  // Ders süresine göre aralık eşleştirme\n  const matchTimeSlot = schedule => {\n    const {\n      time_range\n    } = schedule;\n\n    // Tam eşleşme kontrolü\n    if (timeSlots.includes(time_range)) {\n      return time_range;\n    }\n\n    // Zaman dilimleri arasında çakışma kontrolü\n    const [scheduleStart, scheduleEnd] = time_range.split('-');\n    for (const slot of timeSlots) {\n      const [slotStart, slotEnd] = slot.split('-');\n\n      // Başlangıç saati aynıysa veya yakınsa eşleştir\n      if (scheduleStart === slotStart || Math.abs(parseTime(scheduleStart) - parseTime(slotStart)) < 15) {\n        return slot;\n      }\n    }\n\n    // Eşleşme bulunamadı, varsayılan değer döndür\n    return timeSlots[0];\n  };\n\n  // Saat formatını dakika cinsinden sayısal değere dönüştürme\n  const parseTime = timeStr => {\n    const [hours, minutes] = timeStr.split(':').map(Number);\n    return hours * 60 + minutes;\n  };\n\n  // Ders süresine göre genişlik hesaplama\n  const getCourseSpan = schedule => {\n    const {\n      time_range\n    } = schedule;\n    const [start, end] = time_range.split('-');\n    const startMinutes = parseTime(start);\n    const endMinutes = parseTime(end);\n\n    // Süreyi saat cinsinden hesapla\n    const duration = (endMinutes - startMinutes) / 60;\n\n    // Ders süresine göre sınıf (rowspan/colspan) belirle\n    if (duration <= 1.5) return 1; // Normal aralık\n    if (duration <= 2.5) return 2; // 2-2.5 saatlik dersler\n    return 3; // 3 saatlik veya daha uzun dersler\n  };\n  const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\n\n  // Haftalık programa göre dersleri düzenle\n  const organizeScheduleByLevel = () => {\n    const scheduleByLevel = {};\n\n    // Her seviye için boş program oluştur\n    LEVELS.forEach(level => {\n      scheduleByLevel[level.id] = {\n        hasSchedules: false,\n        schedule: {}\n      };\n\n      // Her gün için boş program oluştur\n      days.forEach(day => {\n        scheduleByLevel[level.id].schedule[day] = {};\n\n        // Her saat dilimi için boş program oluştur\n        timeSlots.forEach(slot => {\n          scheduleByLevel[level.id].schedule[day][slot] = null;\n        });\n      });\n    });\n\n    // Programları yerleştir\n    schedules.forEach(schedule => {\n      var _scheduleByLevel$leve, _scheduleByLevel$leve2, _scheduleByLevel$leve3;\n      if (!schedule.course) return;\n      const levelId = getLevelId(schedule.course.level);\n      const day = schedule.day;\n\n      // Zaman aralığını kontrol et ve en uygun zaman dilimine yerleştir\n      const matchedTimeSlot = matchTimeSlot(schedule);\n      if (((_scheduleByLevel$leve = scheduleByLevel[levelId]) === null || _scheduleByLevel$leve === void 0 ? void 0 : (_scheduleByLevel$leve2 = _scheduleByLevel$leve.schedule) === null || _scheduleByLevel$leve2 === void 0 ? void 0 : (_scheduleByLevel$leve3 = _scheduleByLevel$leve2[day]) === null || _scheduleByLevel$leve3 === void 0 ? void 0 : _scheduleByLevel$leve3[matchedTimeSlot]) === null) {\n        scheduleByLevel[levelId].schedule[day][matchedTimeSlot] = schedule;\n        scheduleByLevel[levelId].hasSchedules = true;\n\n        // Uzun dersler için span bilgisini ekle\n        schedule.courseSpan = getCourseSpan(schedule);\n      }\n    });\n    return scheduleByLevel;\n  };\n  const scheduleByLevel = organizeScheduleByLevel();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"program-list-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"program-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navigation-breadcrumb\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/faculties\",\n          className: \"breadcrumb-link\",\n          children: \"Faculties\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), \" >\", /*#__PURE__*/_jsxDEV(Link, {\n          to: `/faculties/${facultyId}`,\n          className: \"breadcrumb-link\",\n          children: faculty.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), \" >\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"current-page\",\n          children: department.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: department.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"program-subtitle\",\n        children: \"Programs and courses organized by academic year\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"view-toggle\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `view-btn ${viewMode === 'list' ? 'active' : ''}`,\n          onClick: () => setViewMode('list'),\n          children: \"List View\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `view-btn ${viewMode === 'schedule' ? 'active' : ''}`,\n          onClick: () => setViewMode('schedule'),\n          children: \"Schedule View\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading programs...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"level-sections\",\n      children: [LEVELS.map(level => {\n        const levelCourses = coursesByLevel[level.id] || [];\n        const levelSchedule = scheduleByLevel[level.id];\n\n        // Bu seviyede hiçbir kurs yoksa, gösterme\n        if (levelCourses.length === 0) return null;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"level-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"level-title\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"level-icon\",\n              children: level.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 19\n            }, this), level.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 17\n          }, this), viewMode === 'list' ? /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"program-table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Course Code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Course Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"ECTS\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Students\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: levelCourses.map(course => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: course.is_active ? 'active-course' : 'inactive-course',\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"course-code\",\n                  children: course.code\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: course.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: course.type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"text-center\",\n                  children: course.ects\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"text-center\",\n                  children: course.total_hours\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"text-center\",\n                  children: course.student_count || 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: `/courses/edit/${course.id}`,\n                    className: \"view-course-btn\",\n                    children: \"View Details\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 27\n                }, this)]\n              }, course.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: levelSchedule.hasSchedules ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"weekly-schedule\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"schedule-table\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"time-header\",\n                      children: \"Time / Day\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 290,\n                      columnNumber: 31\n                    }, this), days.map(day => /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"day-header\",\n                      children: day\n                    }, day, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 292,\n                      columnNumber: 33\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: timeSlots.map(slot => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"time-slot\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"time-cell\",\n                      children: slot\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 299,\n                      columnNumber: 33\n                    }, this), days.map(day => renderScheduleCell(day, slot, levelSchedule))]\n                  }, slot, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 31\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 23\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"no-schedule\",\n              children: \"No schedule has been generated for this level yet.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 23\n            }, this)\n          }, void 0, false)]\n        }, level.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 15\n        }, this);\n      }), Object.values(coursesByLevel).every(courses => courses.length === 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-programs\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No programs found for this department.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/courses/new\",\n          className: \"add-course-link\",\n          children: \"Add New Course\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n};\n\n// Schedule view tablosunda ders hücresi oluşturma\n_s(ProgramList, \"LwryQw3aJSRt+S7puMENis8GDGs=\", false, function () {\n  return [useParams];\n});\n_c = ProgramList;\nconst renderScheduleCell = (day, slot, levelSchedule) => {\n  const scheduleItem = levelSchedule.schedule[day][slot];\n  if (!scheduleItem) {\n    return /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"schedule-cell\"\n    }, `${day}-${slot}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 12\n    }, this);\n  }\n  const courseSpan = scheduleItem.courseSpan || 1;\n  return /*#__PURE__*/_jsxDEV(\"td\", {\n    className: `schedule-cell has-class span-${courseSpan}`,\n    colSpan: courseSpan > 1 ? courseSpan : undefined,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"schedule-item\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"course-code\",\n        children: scheduleItem.course.code\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"course-name\",\n        children: scheduleItem.course.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"course-hours\",\n        children: [\"(\", scheduleItem.course.total_hours, \" hours)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"room-info\",\n        children: scheduleItem.classroom && `Room: ${scheduleItem.classroom.name}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this)\n  }, `${day}-${slot}`, false, {\n    fileName: _jsxFileName,\n    lineNumber: 338,\n    columnNumber: 5\n  }, this);\n};\nexport default ProgramList;\nvar _c;\n$RefreshReg$(_c, \"ProgramList\");","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","FACULTIES","getDepartmentsByFaculty","getCourses","getSchedules","jsxDEV","_jsxDEV","Fragment","_Fragment","LEVELS","id","name","icon","getLevelId","levelString","includes","ProgramList","token","_s","facultyId","departmentId","courses","setCourses","schedules","setSchedules","loading","setLoading","error","setError","viewMode","setViewMode","faculty","find","f","departments","department","d","fetchData","coursesData","schedulesData","Promise","all","facultyName","departmentName","filteredCourses","filter","course","courseIds","map","filteredSchedules","schedule","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","coursesByLevel","forEach","level","timeSlots","matchTimeSlot","time_range","scheduleStart","scheduleEnd","split","slot","slotStart","slotEnd","Math","abs","parseTime","timeStr","hours","minutes","Number","getCourseSpan","start","end","startMinutes","endMinutes","duration","days","organizeScheduleByLevel","scheduleByLevel","hasSchedules","day","_scheduleByLevel$leve","_scheduleByLevel$leve2","_scheduleByLevel$leve3","levelId","matchedTimeSlot","courseSpan","onClick","levelCourses","levelSchedule","length","is_active","code","type","ects","total_hours","student_count","renderScheduleCell","Object","values","every","_c","scheduleItem","colSpan","undefined","classroom","$RefreshReg$"],"sources":["C:/Users/mehme/OneDrive/Masaüstü/SWESYS/frontend/src/components/ProgramList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { FACULTIES, getDepartmentsByFaculty } from '../constants/facultiesAndDepartments';\nimport { getCourses, getSchedules } from '../api';\nimport '../styles/ProgramList.css';\n\nconst LEVELS = [\n  { id: 'prep', name: 'Preparatory Year', icon: '🔍' },\n  { id: 'year1', name: 'Year 1', icon: '1️⃣' },\n  { id: 'year2', name: 'Year 2', icon: '2️⃣' },\n  { id: 'year3', name: 'Year 3', icon: '3️⃣' },\n  { id: 'year4', name: 'Year 4', icon: '4️⃣' },\n  { id: 'graduate', name: 'Graduate', icon: '🎓' },\n  { id: 'phd', name: 'PhD', icon: '🔬' }\n];\n\n// Map string level values to IDs\nconst getLevelId = (levelString) => {\n  if (levelString.includes('Preparatory')) return 'prep';\n  if (levelString.includes('Year 1')) return 'year1';\n  if (levelString.includes('Year 2')) return 'year2';\n  if (levelString.includes('Year 3')) return 'year3';\n  if (levelString.includes('Year 4')) return 'year4';\n  if (levelString.includes('Graduate')) return 'graduate';\n  if (levelString.includes('PhD')) return 'phd';\n  return 'year1';  // Default to year 1\n};\n\nconst ProgramList = ({ token }) => {\n  const { facultyId, departmentId } = useParams();\n  const [courses, setCourses] = useState([]);\n  const [schedules, setSchedules] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [viewMode, setViewMode] = useState('list'); // 'list' veya 'schedule'\n\n  const faculty = FACULTIES.find(f => f.id === facultyId);\n  const departments = getDepartmentsByFaculty(facultyId);\n  const department = departments.find(d => d.id === departmentId);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        \n        // Kurs ve program verilerini paralel olarak al\n        const [coursesData, schedulesData] = await Promise.all([\n          getCourses(token),\n          getSchedules(token)\n        ]);\n        \n        // Fakülte ve bölüme göre filtreleme\n        const facultyName = faculty ? faculty.name : '';\n        const departmentName = department ? department.name : '';\n        \n        const filteredCourses = coursesData.filter(course => \n          course.faculty === facultyName && course.department === departmentName\n        );\n        \n        // İlgili derslerin ID'lerini al\n        const courseIds = filteredCourses.map(course => course.id);\n        \n        // Bu bölüme ait olan programları filtrele\n        const filteredSchedules = schedulesData.filter(schedule => \n          schedule.course && courseIds.includes(schedule.course.id)\n        );\n        \n        setCourses(filteredCourses);\n        setSchedules(filteredSchedules);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n        setError('Failed to load data. Please try again.');\n        setLoading(false);\n      }\n    };\n\n    if (faculty && department) {\n      fetchData();\n    } else {\n      setLoading(false);\n      setError('Invalid faculty or department');\n    }\n  }, [token, faculty, department]);\n\n  if (!faculty || !department) {\n    return (\n      <div className=\"program-list-container\">\n        <div className=\"error-message\">Faculty or department not found</div>\n        <Link to=\"/faculties\" className=\"back-link\">Back to Faculties</Link>\n      </div>\n    );\n  }\n\n  // Group courses by level\n  const coursesByLevel = {};\n  \n  LEVELS.forEach(level => {\n    coursesByLevel[level.id] = courses.filter(course => getLevelId(course.level) === level.id);\n  });\n  \n  // Ders programı tablosu için haftalık saat aralıklarını tanımla\n  const timeSlots = [\n    '08:30-10:00', '10:15-11:45', '12:00-13:30', \n    '13:45-15:15', '15:30-17:00', '17:15-18:45'\n  ];\n  \n  // Ders süresine göre aralık eşleştirme\n  const matchTimeSlot = (schedule) => {\n    const { time_range } = schedule;\n    \n    // Tam eşleşme kontrolü\n    if (timeSlots.includes(time_range)) {\n      return time_range;\n    }\n    \n    // Zaman dilimleri arasında çakışma kontrolü\n    const [scheduleStart, scheduleEnd] = time_range.split('-');\n    \n    for (const slot of timeSlots) {\n      const [slotStart, slotEnd] = slot.split('-');\n      \n      // Başlangıç saati aynıysa veya yakınsa eşleştir\n      if (scheduleStart === slotStart || Math.abs(parseTime(scheduleStart) - parseTime(slotStart)) < 15) {\n        return slot;\n      }\n    }\n    \n    // Eşleşme bulunamadı, varsayılan değer döndür\n    return timeSlots[0];\n  };\n  \n  // Saat formatını dakika cinsinden sayısal değere dönüştürme\n  const parseTime = (timeStr) => {\n    const [hours, minutes] = timeStr.split(':').map(Number);\n    return hours * 60 + minutes;\n  };\n  \n  // Ders süresine göre genişlik hesaplama\n  const getCourseSpan = (schedule) => {\n    const { time_range } = schedule;\n    const [start, end] = time_range.split('-');\n    \n    const startMinutes = parseTime(start);\n    const endMinutes = parseTime(end);\n    \n    // Süreyi saat cinsinden hesapla\n    const duration = (endMinutes - startMinutes) / 60;\n    \n    // Ders süresine göre sınıf (rowspan/colspan) belirle\n    if (duration <= 1.5) return 1;  // Normal aralık\n    if (duration <= 2.5) return 2;  // 2-2.5 saatlik dersler\n    return 3;                      // 3 saatlik veya daha uzun dersler\n  };\n  \n  const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\n  \n  // Haftalık programa göre dersleri düzenle\n  const organizeScheduleByLevel = () => {\n    const scheduleByLevel = {};\n    \n    // Her seviye için boş program oluştur\n    LEVELS.forEach(level => {\n      scheduleByLevel[level.id] = {\n        hasSchedules: false,\n        schedule: {}\n      };\n      \n      // Her gün için boş program oluştur\n      days.forEach(day => {\n        scheduleByLevel[level.id].schedule[day] = {};\n        \n        // Her saat dilimi için boş program oluştur\n        timeSlots.forEach(slot => {\n          scheduleByLevel[level.id].schedule[day][slot] = null;\n        });\n      });\n    });\n    \n    // Programları yerleştir\n    schedules.forEach(schedule => {\n      if (!schedule.course) return;\n      \n      const levelId = getLevelId(schedule.course.level);\n      const day = schedule.day;\n      \n      // Zaman aralığını kontrol et ve en uygun zaman dilimine yerleştir\n      const matchedTimeSlot = matchTimeSlot(schedule);\n      \n      if (scheduleByLevel[levelId]?.schedule?.[day]?.[matchedTimeSlot] === null) {\n        scheduleByLevel[levelId].schedule[day][matchedTimeSlot] = schedule;\n        scheduleByLevel[levelId].hasSchedules = true;\n        \n        // Uzun dersler için span bilgisini ekle\n        schedule.courseSpan = getCourseSpan(schedule);\n      }\n    });\n    \n    return scheduleByLevel;\n  };\n  \n  const scheduleByLevel = organizeScheduleByLevel();\n\n  return (\n    <div className=\"program-list-container\">\n      <div className=\"program-header\">\n        <div className=\"navigation-breadcrumb\">\n          <Link to=\"/faculties\" className=\"breadcrumb-link\">Faculties</Link> &gt; \n          <Link to={`/faculties/${facultyId}`} className=\"breadcrumb-link\">{faculty.name}</Link> &gt; \n          <span className=\"current-page\">{department.name}</span>\n        </div>\n        \n        <h1>{department.name}</h1>\n        <p className=\"program-subtitle\">Programs and courses organized by academic year</p>\n        \n        <div className=\"view-toggle\">\n          <button \n            className={`view-btn ${viewMode === 'list' ? 'active' : ''}`} \n            onClick={() => setViewMode('list')}\n          >\n            List View\n          </button>\n          <button \n            className={`view-btn ${viewMode === 'schedule' ? 'active' : ''}`} \n            onClick={() => setViewMode('schedule')}\n          >\n            Schedule View\n          </button>\n        </div>\n      </div>\n      \n      {loading ? (\n        <div className=\"loading\">Loading programs...</div>\n      ) : error ? (\n        <div className=\"error-message\">{error}</div>\n      ) : (\n        <div className=\"level-sections\">\n          {LEVELS.map(level => {\n            const levelCourses = coursesByLevel[level.id] || [];\n            const levelSchedule = scheduleByLevel[level.id];\n            \n            // Bu seviyede hiçbir kurs yoksa, gösterme\n            if (levelCourses.length === 0) return null;\n            \n            return (\n              <div className=\"level-section\" key={level.id}>\n                <h2 className=\"level-title\">\n                  <span className=\"level-icon\">{level.icon}</span>\n                  {level.name}\n                </h2>\n                \n                {viewMode === 'list' ? (\n                  <table className=\"program-table\">\n                    <thead>\n                      <tr>\n                        <th>Course Code</th>\n                        <th>Course Name</th>\n                        <th>Type</th>\n                        <th>ECTS</th>\n                        <th>Hours</th>\n                        <th>Students</th>\n                        <th>Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {levelCourses.map(course => (\n                        <tr key={course.id} className={course.is_active ? 'active-course' : 'inactive-course'}>\n                          <td className=\"course-code\">{course.code}</td>\n                          <td>{course.name}</td>\n                          <td>{course.type}</td>\n                          <td className=\"text-center\">{course.ects}</td>\n                          <td className=\"text-center\">{course.total_hours}</td>\n                          <td className=\"text-center\">{course.student_count || 0}</td>\n                          <td>\n                            <Link to={`/courses/edit/${course.id}`} className=\"view-course-btn\">\n                              View Details\n                            </Link>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                ) : (\n                  <>\n                    {levelSchedule.hasSchedules ? (\n                      <div className=\"weekly-schedule\">\n                        <table className=\"schedule-table\">\n                          <thead>\n                            <tr>\n                              <th className=\"time-header\">Time / Day</th>\n                              {days.map(day => (\n                                <th key={day} className=\"day-header\">{day}</th>\n                              ))}\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {timeSlots.map(slot => (\n                              <tr key={slot} className=\"time-slot\">\n                                <td className=\"time-cell\">{slot}</td>\n                                {days.map(day => renderScheduleCell(day, slot, levelSchedule))}\n                              </tr>\n                            ))}\n                          </tbody>\n                        </table>\n                      </div>\n                    ) : (\n                      <p className=\"no-schedule\">No schedule has been generated for this level yet.</p>\n                    )}\n                  </>\n                )}\n              </div>\n            );\n          })}\n          \n          {Object.values(coursesByLevel).every(courses => courses.length === 0) && (\n            <div className=\"no-programs\">\n              <p>No programs found for this department.</p>\n              <Link to=\"/courses/new\" className=\"add-course-link\">Add New Course</Link>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Schedule view tablosunda ders hücresi oluşturma\nconst renderScheduleCell = (day, slot, levelSchedule) => {\n  const scheduleItem = levelSchedule.schedule[day][slot];\n  \n  if (!scheduleItem) {\n    return <td key={`${day}-${slot}`} className=\"schedule-cell\"></td>;\n  }\n  \n  const courseSpan = scheduleItem.courseSpan || 1;\n  \n  return (\n    <td \n      key={`${day}-${slot}`}\n      className={`schedule-cell has-class span-${courseSpan}`}\n      colSpan={courseSpan > 1 ? courseSpan : undefined}\n    >\n      <div className=\"schedule-item\">\n        <div className=\"course-code\">{scheduleItem.course.code}</div>\n        <div className=\"course-name\">{scheduleItem.course.name}</div>\n        <div className=\"course-hours\">({scheduleItem.course.total_hours} hours)</div>\n        <div className=\"room-info\">\n          {scheduleItem.classroom && `Room: ${scheduleItem.classroom.name}`}\n        </div>\n      </div>\n    </td>\n  );\n};\n\nexport default ProgramList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}